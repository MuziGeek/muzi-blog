---
title: Day18
date: 2025-01-15 15:49:13
categories:
  - - å­¦ä¹ æˆé•¿
    - ç¼–ç¨‹
    - é¢è¯•è®­ç»ƒè¥
tags:
  - è®¾è®¡æ¨¡å¼
---
**2025-01-15**ğŸŒ±ä¸Šæµ·: â˜€ï¸   ğŸŒ¡ï¸+6Â°C ğŸŒ¬ï¸â†“18km/h
## è°ˆè°ˆä½ äº†è§£çš„æœ€å¸¸è§çš„å‡ ç§è®¾è®¡æ¨¡å¼ï¼Œè¯´è¯´ä»–ä»¬çš„åº”ç”¨åœºæ™¯

### è®¾è®¡æ¨¡å¼æ€»è§ˆ

è®¾è®¡æ¨¡å¼æ€»å…±æœ‰23ç§ï¼ŒåŒæ—¶åˆåˆ†ä¸ºä¸‰å¤§ç±»ï¼š

1. **åˆ›å»ºå‹æ¨¡å¼**ï¼ˆCreational Patternsï¼‰ï¼š**è¿™ç±»æ¨¡å¼ä¸»è¦å…³æ³¨å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹**ã€‚å®ƒä»¬åˆ†åˆ«æ˜¯ï¼š

- **å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰**
- **å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Methodï¼‰**
- æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factoryï¼‰
- **å»ºé€ è€…æ¨¡å¼ï¼ˆBuilderï¼‰**
- åŸå‹æ¨¡å¼ï¼ˆPrototypeï¼‰

2. **ç»“æ„å‹æ¨¡å¼**ï¼ˆStructural Patternsï¼‰ï¼š**è¿™ç±»æ¨¡å¼ä¸»è¦å…³æ³¨ç±»å’Œå¯¹è±¡ä¹‹é—´çš„ç»„åˆ**ã€‚å®ƒä»¬åˆ†åˆ«æ˜¯ï¼š

- **é€‚é…å™¨æ¨¡å¼ï¼ˆAdapterï¼‰**
- æ¡¥æ¥æ¨¡å¼ï¼ˆBridgeï¼‰
- ç»„åˆæ¨¡å¼ï¼ˆCompositeï¼‰
- **è£…é¥°æ¨¡å¼ï¼ˆDecoratorï¼‰**
- å¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰
- äº«å…ƒæ¨¡å¼ï¼ˆFlyweightï¼‰
- **ä»£ç†æ¨¡å¼ï¼ˆProxyï¼‰**

3. **è¡Œä¸ºå‹æ¨¡å¼**ï¼ˆBehavioral Patternsï¼‰ï¼š**è¿™ç±»æ¨¡å¼ä¸»è¦å…³æ³¨å¯¹è±¡ä¹‹é—´çš„é€šä¿¡**ã€‚å®ƒä»¬åˆ†åˆ«æ˜¯ï¼š

- **èŒè´£é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰**
- å‘½ä»¤æ¨¡å¼ï¼ˆCommandï¼‰
- è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreterï¼‰
- è¿­ä»£å™¨æ¨¡å¼ï¼ˆIteratorï¼‰
- ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediatorï¼‰
- å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMementoï¼‰
- **è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰**
- çŠ¶æ€æ¨¡å¼ï¼ˆStateï¼‰
- **ç­–ç•¥æ¨¡å¼ï¼ˆStrategyï¼‰**
- **æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Methodï¼‰**
- è®¿é—®è€…æ¨¡å¼ï¼ˆVisitorï¼‰

### å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼

ä¸Šé¢åŠ ç²—çš„å…¶å®å°±æ˜¯æ¯”è¾ƒå¸¸ç”¨ä¹Ÿæ˜¯æ¯”è¾ƒé‡è¦çš„å‡ ä¸ªè®¾è®¡æ¨¡å¼äº†ï¼Œæ¥ä¸‹æ¥åˆ†ä¸‹è¿›è¡Œè®²è§£

#### å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰

##### æ¦‚å¿µ

**å•ä¾‹è®¾è®¡æ¨¡å¼**ï¼ˆSingleton Design Patternï¼‰ç†è§£èµ·æ¥éå¸¸ç®€å•ã€‚ä¸€ä¸ªç±»åªå…è®¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–è€…å®ä¾‹ï¼‰ï¼Œé‚£è¿™ä¸ªç±»å°±æ˜¯ä¸€ä¸ª**å•ä¾‹ç±»**ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼å°±å«ä½œå•ä¾‹è®¾è®¡æ¨¡å¼ï¼Œç®€ç§°å•ä¾‹æ¨¡å¼ã€‚

##### ç¤ºä¾‹

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨æ¯”è¾ƒç»å…¸çš„åŒæ£€é”è¿›è¡Œå®ä¾‹çš„å®ç°ã€‚

```
public class DclSingleton {  
    // volatileå¦‚æœä¸åŠ å¯èƒ½ä¼šå‡ºç°åŠåˆå§‹åŒ–çš„å¯¹è±¡
    // ç°åœ¨ç”¨çš„é«˜ç‰ˆæœ¬çš„ Java å·²ç»åœ¨ JDK å†…éƒ¨å®ç°ä¸­è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ˆè§£å†³çš„æ–¹æ³•å¾ˆç®€å•ï¼Œåªè¦æŠŠå¯¹è±¡ new æ“ä½œå’Œåˆå§‹åŒ–æ“ä½œè®¾è®¡ä¸ºåŸå­æ“ä½œï¼Œå°±è‡ªç„¶èƒ½ç¦æ­¢é‡æ’åºï¼‰,ä¸ºäº†å…¼å®¹æ€§æˆ‘ä»¬åŠ ä¸Š
    private volatile static Singleton singleton;  
    private Singleton (){}  

    public static Singleton getInstance() {  
        if (singleton == null) {  
            synchronized (Singleton.class) {  
                if (singleton == null) {  
                    singleton = new Singleton();  
                }  
            }  
        }  
        return singleton;  
    }  
}

```

##### åº”ç”¨åœºæ™¯

| **åº”ç”¨åœºæ™¯åˆ†ç±»** | **å…·ä½“ç¤ºä¾‹**            | **å•ä¾‹æ¨¡å¼ä½œç”¨**                    |
| ---------- | ------------------- | ----------------------------- |
| èµ„æºç®¡ç†       | æ•°æ®åº“è¿æ¥æ±               | æ§åˆ¶è¿æ¥æ•°é‡ï¼Œé¿å…èµ„æºæµªè´¹ï¼Œæå‡æ•°æ®åº“è®¿é—®æ•ˆç‡       |
| èµ„æºç®¡ç†       | æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼ˆå¦‚æ—¥å¿—è®°å½•ï¼‰       | ä¿è¯ç»Ÿä¸€æ–‡ä»¶æ“ä½œï¼Œé˜²æ­¢å¤šä½ç½®å†™å…¥å¯¼è‡´æ•°æ®æ··ä¹±æˆ–æ–‡ä»¶æŸå   |
| é…ç½®ç®¡ç†       | åº”ç”¨ç¨‹åºé…ç½®ï¼ˆå¦‚æ•°æ®åº“é…ç½®ã€ç³»ç»Ÿå‚æ•°ï¼‰ | æ–¹ä¾¿å„å¤„è·å–ç»Ÿä¸€é…ç½®ä¿¡æ¯ï¼Œç¡®ä¿ä¿¡æ¯ä¸€è‡´æ€§          |
| å·¥å…·ç±»        | çº¿ç¨‹æ±                  | å…±äº«çº¿ç¨‹æ± æ‰§è¡Œä»»åŠ¡ï¼Œé¿å…çº¿ç¨‹é¢‘ç¹åˆ›å»ºé”€æ¯ï¼Œæå‡å¹¶å‘å¤„ç†èƒ½åŠ› |
| å·¥å…·ç±»        | ç¼“å­˜ç®¡ç†                | å®ç°æ•°æ®é«˜æ•ˆç¼“å­˜ä¸å…±äº«ï¼Œå„æ¨¡å—é€šè¿‡å•ä¾‹è¿›è¡Œç¼“å­˜è¯»å†™     |
| å…¨å±€çŠ¶æ€ç®¡ç†     | ç”¨æˆ·ç™»å½•çŠ¶æ€              | å„æ¨¡å—å…±äº«ç™»å½•çŠ¶æ€ï¼Œä¾æ­¤å†³å®šæŸäº›æ“ä½œæ˜¯å¦æ‰§è¡Œ        |
| å…¨å±€çŠ¶æ€ç®¡ç†     | æ¸¸æˆä¸­çš„åœºæ™¯ç®¡ç†            | æ–¹ä¾¿å„æ¨¡å—è·å–å’Œä¿®æ”¹åœºæ™¯ä¿¡æ¯ï¼Œä¿è¯åœºæ™¯ç®¡ç†çš„å”¯ä¸€æ€§     |

#### å·¥å‚æ¨¡å¼

##### æ¦‚å¿µ

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå·¥å‚æ¨¡å¼åˆ†ä¸ºä¸‰ç§æ›´åŠ ç»†åˆ†çš„ç±»å‹ï¼š**ç®€å•å·¥å‚**ã€**å·¥å‚æ–¹æ³•**å’Œ**æŠ½è±¡å·¥å‚**ã€‚

åœ¨ GoF çš„ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ä¸­ï¼Œå®ƒå°†ç®€å•å·¥å‚æ¨¡å¼çœ‹ä½œæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¸€ç§ç‰¹ä¾‹ï¼Œæ‰€ä»¥å·¥å‚æ¨¡å¼åªè¢«åˆ†æˆäº†**å·¥å‚æ–¹æ³•**å’Œ**æŠ½è±¡å·¥å‚**ä¸¤ç±»ã€‚

##### å®ä¾‹

ä»¥å·¥å‚æ–¹æ³•ä¸ºä¾‹ï¼Œé€šè¿‡é…ç½®åŠ è½½å·¥å‚å¯¹è±¡

```
http=com.muzi.factoryMethod.resourceFactory.impl.HttpResourceLoader
file=com.muzi.factoryMethod.resourceFactory.impl.FileResourceLoader
classpath=com.muzi.factoryMethod.resourceFactory.impl.ClassPathResourceLoader
default=com.muzi.factoryMethod.resourceFactory.impl.DefaultResourceLoader
```

åŠ è½½é…ç½®ç±»ï¼Œåˆå§‹åŒ–å·¥å‚å¯¹è±¡

```
static {
    InputStream inputStream = Thread.currentThread().getContextClassLoader()
        .getResourceAsStream("resourceLoader.properties");
    Properties properties = new Properties();
    try {
        properties.load(inputStream);
        for (Map.Entry<Object,Object> entry : properties.entrySet()){
            String key = entry.getKey().toString();
            Class<?> clazz = Class.forName(entry.getValue().toString());
            IResourceLoader loader = (IResourceLoader) clazz.getConstructor().newInstance();
            resourceLoaderCache.put(key,loader);
        }
    } catch (IOException | ClassNotFoundException | NoSuchMethodException | InstantiationException |
             IllegalAccessException | InvocationTargetException e) {
        throw new RuntimeException(e);
    }
}
```

æ„é€ æŠ½è±¡äº§å“ç±»

```
public abstract class AbstractResource {

    private String url;

    public AbstractResource(){}

    public AbstractResource(String url) {
        this.url = url;
    }

    protected void shared(){
        System.out.println("è¿™æ˜¯å…±äº«æ–¹æ³•");
    }

    /**
     * æ¯ä¸ªå­ç±»éœ€è¦ç‹¬è‡ªå®ç°çš„æ–¹æ³•
     * @return å­—èŠ‚æµ
     */
    public abstract InputStream getInputStream();
}
```

é€šè¿‡ç»§æ‰¿æŠ½è±¡äº§å“ç±»è¿›è¡Œå…·ä½“çš„å®ç°

```
public class ClasspathResource extends AbstractResource {

    public ClasspathResource() {
    }

    public ClasspathResource(String url) {
        super(url);
    }

    @Override
    public InputStream getInputStream() {
        return null;
    }
}
```

åŒæ—¶ï¼ŒåŠ å…¥ç”Ÿæˆä¸åŒç±»å‹çš„äº§å“ä¹Ÿéœ€è¦ç»§æ‰¿æŠ½è±¡äº§å“ç±»ï¼Œå·¥å‚ç±»ä¹Ÿéœ€è¦é¢å‘äº§å“çš„æŠ½è±¡è¿›è¡Œç¼–ç¨‹

```
public class ClassPathResourceLoader implements IResourceLoader {
    @Override
    public AbstractResource load(String url) {
        // ä¸­é—´çœç•¥å¤æ‚çš„åˆ›å»ºè¿‡ç¨‹
        return new ClasspathResource(url);
    }
}
```

ç¼–å†™æµ‹è¯•ç”¨ä¾‹

```
@Test
public void testFactoryMethod(){
    String url = "file://D://a.txt";
    ResourceLoader resourceLoader = new ResourceLoader();
    AbstractResource resource = resourceLoader.load(url);
    log.info("resource --> {}",resource.getClass().getName());
}
```

##### åº”ç”¨åœºæ™¯

| **æ¨¡å¼ç±»å‹** | **åº”ç”¨åœºæ™¯**    | **ä¸¾ä¾‹**                                    |
| -------- | ----------- | ----------------------------------------- |
| ç®€å•å·¥å‚æ¨¡å¼   | åˆ›å»ºå¯¹è±¡é€»è¾‘ç®€å•    | å›¾å½¢ç»˜åˆ¶ç³»ç»Ÿï¼Œä¾ç”¨æˆ·è¾“å…¥å›¾å½¢ç±»å‹ï¼ˆåœ†ã€çŸ©å½¢ã€ä¸‰è§’å½¢ï¼‰åˆ›å»ºå¯¹åº”å›¾å½¢å¯¹è±¡        |
| ç®€å•å·¥å‚æ¨¡å¼   | å‡å°‘å¯¹è±¡åˆ›å»ºçš„é‡å¤ä»£ç  | ç”µå•†ç³»ç»Ÿå¤šå¤„éœ€åˆ›å»ºè®¢å•å¯¹è±¡ï¼Œå°†åˆ›å»ºè®¢å•çš„é‡å¤æ“ä½œå°è£…åœ¨å·¥å‚ç±»            |
| å·¥å‚æ–¹æ³•æ¨¡å¼   | å¯¹è±¡åˆ›å»ºé€»è¾‘å¤æ‚æˆ–å¤šå˜ | æ¸¸æˆå¼€å‘ä¸­ï¼Œä¸åŒæ¸¸æˆå…³å¡æŒ‰ä¸åŒé€»è¾‘åˆ›å»ºæ•Œäººå¯¹è±¡ï¼Œä¸”é€»è¾‘å¯èƒ½å˜åŒ–           |
| å·¥å‚æ–¹æ³•æ¨¡å¼   | æ‰©å±•æ€§è¦æ±‚é«˜      | æŠ¥è¡¨ç”Ÿæˆç³»ç»Ÿï¼Œéœ€é¢‘ç¹æ·»åŠ æ–°æŠ¥è¡¨ç±»å‹ï¼ˆæ—¥æŠ¥ã€å‘¨æŠ¥ç­‰ï¼‰ï¼Œä¸”æ·»åŠ æ—¶å°‘å½±å“ç°æœ‰ä»£ç      |
| æŠ½è±¡å·¥å‚æ¨¡å¼   | åˆ›å»ºä¸€ç³»åˆ—ç›¸å…³å¯¹è±¡   | è·¨å¹³å°å›¾å½¢ç•Œé¢å¼€å‘ï¼Œä¸ºä¸åŒæ“ä½œç³»ç»Ÿåˆ›å»ºé£æ ¼ã€åŠŸèƒ½ä¸€è‡´çš„æŒ‰é’®ã€æ–‡æœ¬æ¡†ç­‰ç»„ä»¶      |
| æŠ½è±¡å·¥å‚æ¨¡å¼   | ç³»ç»Ÿæœ‰å¤šä¸ªäº§å“æ—    | æ±½è½¦åˆ¶é€ ç³»ç»Ÿï¼Œæœ‰è±ªåå‹å’Œç»æµå‹äº§å“æ—ï¼Œå„åŒ…å«å‘åŠ¨æœºã€åº§æ¤…ç­‰äº§å“å¯¹è±¡ï¼Œä¾ç”¨æˆ·é€‰æ‹©åˆ›å»º |

#### å»ºé€ è€…æ¨¡å¼

##### æ¦‚å¿µ

**Builder æ¨¡å¼**ï¼Œä¸­æ–‡ç¿»è¯‘ä¸º**å»ºé€ è€…æ¨¡å¼**æˆ–è€…**æ„å»ºè€…æ¨¡å¼**ï¼Œä¹Ÿæœ‰äººå«å®ƒ**ç”Ÿæˆå™¨æ¨¡å¼**ã€‚

å®é™…ä¸Šï¼Œå»ºé€ è€…æ¨¡å¼çš„åŸç†å’Œä»£ç å®ç°éå¸¸ç®€å•ï¼ŒæŒæ¡èµ·æ¥å¹¶ä¸éš¾ï¼Œéš¾ç‚¹åœ¨äºåº”ç”¨åœºæ™¯ã€‚æ¯”å¦‚ï¼Œä½ æœ‰æ²¡æœ‰è€ƒè™‘è¿‡è¿™æ ·å‡ ä¸ªé—®é¢˜ï¼š**ç›´æ¥ä½¿ç”¨æ„é€ å‡½æ•°æˆ–è€…é…åˆ set æ–¹æ³•å°±èƒ½åˆ›å»ºå¯¹è±¡**ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦å»ºé€ è€…æ¨¡å¼æ¥åˆ›å»ºå‘¢ï¼Ÿå»ºé€ è€…æ¨¡å¼å’Œå·¥å‚æ¨¡å¼éƒ½å¯ä»¥åˆ›å»ºå¯¹è±¡ï¼Œé‚£å®ƒä»¬ä¸¤ä¸ªçš„åŒºåˆ«åœ¨å“ªé‡Œå‘¢ï¼Ÿï¼ˆå»ºè®®è‡ªè¡Œæœç´¢å­¦ä¹ ï¼‰

åˆ›å»ºè€…æ¨¡å¼ä¸»è¦åŒ…å«ä»¥ä¸‹å››ä¸ªè§’è‰²ï¼š

1. äº§å“ï¼ˆProductï¼‰ï¼šè¡¨ç¤ºå°†è¦è¢«æ„å»ºçš„å¤æ‚å¯¹è±¡ã€‚
2. æŠ½è±¡åˆ›å»ºè€…ï¼ˆAbstract Builderï¼‰ï¼šå®šä¹‰æ„å»ºäº§å“çš„æ¥å£ï¼Œé€šå¸¸åŒ…å«åˆ›å»ºå’Œè·å–äº§å“çš„æ–¹æ³•ã€‚
3. å…·ä½“åˆ›å»ºè€…ï¼ˆConcrete Builderï¼‰ï¼šå®ç°æŠ½è±¡åˆ›å»ºè€…å®šä¹‰çš„æ¥å£ï¼Œä¸ºäº§å“çš„å„ä¸ªéƒ¨åˆ†æä¾›å…·ä½“å®ç°ã€‚
4. æŒ‡æŒ¥è€…ï¼ˆDirectorï¼‰ï¼šè´Ÿè´£è°ƒç”¨å…·ä½“åˆ›å»ºè€…æ¥æ„å»ºäº§å“çš„å„ä¸ªéƒ¨åˆ†ï¼Œæ§åˆ¶æ„å»ºè¿‡ç¨‹ã€‚

##### ç¤ºä¾‹

```
public class HtmlDocument {
    private String header = "";
    private String body = "";
    private String footer = "";

    public void addHeader(String header) {
        this.header = header;
    }

    public void addBody(String body) {
        this.body = body;
    }

    public void addFooter(String footer) {
        this.footer = footer;
    }

    @Override
    public String toString() {
        return "<html><head>" + header + "</head><body>" + body + "</body><footer>" + footer + "</footer></html>";
    }

    public static class Builder {
        protected HtmlDocument document;

        public Builder() {
            document = new HtmlDocument();
        }

        public Builder addHeader(String header) {
            document.addHeader(header);
            return this;
        }

        public Builder addBody(String body) {
            document.addBody(body);
            return this;
        }

        public Builder addFooter(String footer) {
            document.addFooter(footer);
            return this;
        }

        public HtmlDocument build() {
            return document;
        }
    }
}
```

æ„é€ HTMLæ–‡æ¡£å¯¹è±¡

```
public class Main {
    public static void main(String[] args) {
        HtmlDocument.ArticleBuilder builder = new HtmlDocument.ArticleBuilder();
        HtmlDocument document = builder.addHeader("This is the header")
                                       .addBody("This is the body")
                                       .addFooter("This is the footer")
                                       .build();

        System.out.println("Constructed HTML Document: \n" + document);
    }
}
```

##### åº”ç”¨åœºæ™¯

| **åº”ç”¨åœºæ™¯åˆ†ç±»**         | **å…·ä½“ç¤ºä¾‹** | **è¯´æ˜**                       |
| ------------------ | -------- | ---------------------------- |
| åˆ›å»ºå¤æ‚å¯¹è±¡             | æ¸¸æˆè§’è‰²åˆ›å»º   | æ¶‰åŠå¤–è²Œã€èƒ½åŠ›ã€è£…å¤‡ç­‰å¤šå±æ€§è®¾ç½®ï¼Œä¸åŒè§’è‰²åˆ›å»ºç»†èŠ‚ä¸åŒ  |
| åˆ›å»ºå¤æ‚å¯¹è±¡             | æ–‡æ¡£ç”Ÿæˆ     | å¦‚ç”Ÿæˆå«å°é¢ã€ç›®å½•ç­‰å¤šéƒ¨åˆ†çš„æŠ¥å‘Šï¼Œä¸åŒæŠ¥å‘Šæ ¼å¼å’Œå†…å®¹æœ‰åˆ« |
| å¯¹è±¡åˆ›å»ºè¿‡ç¨‹æ­¥éª¤å›ºå®šï¼Œä½†å…·ä½“å®ç°ä¸åŒ | æ±½è½¦åˆ¶é€      | åˆ¶é€ æ­¥éª¤å›ºå®šï¼Œä¸åŒå“ç‰Œå‹å·æ±½è½¦å„æ­¥éª¤å®ç°æœ‰å·®å¼‚      |
| å¯¹è±¡åˆ›å»ºè¿‡ç¨‹æ­¥éª¤å›ºå®šï¼Œä½†å…·ä½“å®ç°ä¸åŒ | æˆ¿å±‹å»ºé€      | å»ºé€ æµç¨‹å›ºå®šï¼Œä¸åŒç±»å‹æˆ¿å±‹å„æµç¨‹å®ç°æœ‰åˆ«         |
| éœ€è¦å¯¹åˆ›å»ºè¿‡ç¨‹è¿›è¡Œç²¾ç»†æ§åˆ¶      | å®šåˆ¶åŒ–äº§å“ç”Ÿäº§  | å¦‚å®šåˆ¶ç”µè„‘ï¼Œå¯æŒ‰å®¢æˆ·éœ€æ±‚ç²¾ç¡®æ§åˆ¶ç»„ä»¶é€‰æ‹©å’Œç»„è£…      |
| éœ€è¦å¯¹åˆ›å»ºè¿‡ç¨‹è¿›è¡Œç²¾ç»†æ§åˆ¶      | æ—…è¡Œè¡Œç¨‹è§„åˆ’   | ä¾æ—…è¡Œè€…éœ€æ±‚ç²¾ç»†æ§åˆ¶äº¤é€šã€ä½å®¿ã€æ™¯ç‚¹ç­‰è¡Œç¨‹å®‰æ’      |

#### é€‚é…å™¨æ¨¡å¼

##### æ¦‚å¿µ

é€‚é…å™¨è®¾è®¡æ¨¡å¼ï¼ˆAdapter Design Patternï¼‰æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œç”¨äº**è§£å†³ä¸¤ä¸ªä¸å…¼å®¹æ¥å£ä¹‹é—´çš„é—®é¢˜**ã€‚é€‚é…å™¨å…è®¸**å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢ä¸ºå®¢æˆ·ç«¯æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚**

åœ¨é€‚é…å™¨è®¾è®¡æ¨¡å¼ä¸­ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å››ä¸ªè§’è‰²ï¼š

1. **ç›®æ ‡æ¥å£ï¼ˆTargetï¼‰**ï¼šè¿™æ˜¯å®¢æˆ·ç«¯æœŸæœ›ä½¿ç”¨çš„æ¥å£ï¼Œå®ƒå®šä¹‰äº†ç‰¹å®šé¢†åŸŸçš„æ“ä½œå’Œæ–¹æ³•ã€‚
2. **éœ€è¦é€‚é…çš„ç±»ï¼ˆAdapteeï¼‰**ï¼šè¿™æ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„ç±»ï¼Œå®ƒå…·æœ‰å®¢æˆ·ç«¯éœ€è¦çš„åŠŸèƒ½ï¼Œä½†å…¶æ¥å£ä¸ç›®æ ‡æ¥å£ä¸å…¼å®¹ã€‚é€‚é…å™¨çš„ç›®æ ‡æ˜¯ä½¿è¿™ä¸ªç±»çš„åŠŸèƒ½èƒ½å¤Ÿé€šè¿‡ç›®æ ‡æ¥å£ä½¿ç”¨ã€‚
3. **é€‚é…å™¨ï¼ˆAdapterï¼‰**ï¼šè¿™æ˜¯é€‚é…å™¨æ¨¡å¼çš„æ ¸å¿ƒè§’è‰²ï¼Œå®ƒå®ç°äº†ç›®æ ‡æ¥å£å¹¶æŒæœ‰éœ€è¦é€‚é…çš„ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚é€‚é…å™¨é€šè¿‡å°è£…Adapteeçš„åŠŸèƒ½ï¼Œä½¿å…¶èƒ½å¤Ÿæ»¡è¶³Targetæ¥å£çš„è¦æ±‚ã€‚
4. **å®¢æˆ·ç«¯ï¼ˆClientï¼‰**ï¼šè¿™æ˜¯ä½¿ç”¨ç›®æ ‡æ¥å£çš„ç±»ã€‚å®¢æˆ·ç«¯ä¸ç›®æ ‡æ¥å£è¿›è¡Œäº¤äº’ï¼Œä¸ç›´æ¥ä¸éœ€è¦é€‚é…çš„ç±»äº¤äº’ã€‚é€šè¿‡ä½¿ç”¨é€‚é…å™¨ï¼Œå®¢æˆ·ç«¯å¯ä»¥é—´æ¥åœ°ä½¿ç”¨éœ€è¦é€‚é…çš„ç±»çš„åŠŸèƒ½ã€‚

é€‚é…å™¨æ¨¡å¼çš„ä¸»è¦ç›®çš„æ˜¯åœ¨ä¸ä¿®æ”¹ç°æœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œä½¿ä¸å…¼å®¹çš„æ¥å£èƒ½å¤ŸååŒå·¥ä½œã€‚é€šè¿‡å¼•å…¥é€‚é…å™¨è§’è‰²ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨ç›®æ ‡æ¥å£ä¸éœ€è¦é€‚é…çš„ç±»è¿›è¡Œé€šä¿¡ï¼Œä»è€Œå®ç°è§£è€¦å’Œæ‰©å±•æ€§ã€‚

é€‚é…å™¨æ¨¡å¼æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š**ç±»é€‚é…å™¨**å’Œ**å¯¹è±¡é€‚é…å™¨**ã€‚

##### ç¤ºä¾‹

ç±»é€‚é…å™¨**ä½¿ç”¨ç»§æ‰¿æ¥å®ç°é€‚é…å™¨åŠŸèƒ½ã€‚é€‚é…å™¨ç±»ç»§æ‰¿äº†åŸæœ‰çš„ç±»ï¼ˆAdapteeï¼‰å¹¶å®ç°äº†ç›®æ ‡æ¥å£ï¼ˆTargetï¼‰**ã€‚

```
// ç›®æ ‡æ¥å£
interface Target {
    void request();
}

// éœ€è¦é€‚é…çš„ç±»ï¼ˆAdapteeï¼‰
class Adaptee {
    void specificRequest() {
        System.out.println("Adaptee's specific request");
    }
}

// ç±»é€‚é…å™¨
class ClassAdapter extends Adaptee implements Target {
    @Override
    public void request() {
        specificRequest();
    }
}

public class ClassAdapterExample {
    public static void main(String[] args) {
        Target target = new ClassAdapter();
        target.request();
    }
}
```

å¯¹è±¡é€‚é…å™¨**ä½¿ç”¨ç»„åˆæ¥å®ç°é€‚é…å™¨åŠŸèƒ½**ã€‚é€‚é…å™¨ç±»åŒ…å«ä¸€ä¸ª**åŸæœ‰ç±»çš„å®ä¾‹ï¼ˆAdapteeï¼‰å¹¶å®ç°äº†ç›®æ ‡æ¥å£ï¼ˆTargetï¼‰**ã€‚

```
// ç›®æ ‡æ¥å£
interface Target {
    void request();
}

// éœ€è¦é€‚é…çš„ç±»ï¼ˆAdapteeï¼‰
class Adaptee {
    void specificRequest() {
        System.out.println("Adaptee's specific request");
    }
}

// å¯¹è±¡é€‚é…å™¨
class ObjectAdapter implements Target {
    private Adaptee adaptee;

    public ObjectAdapter(Adaptee adaptee) {
        this.adaptee = adaptee;
    }

    @Override
    public void request() {
        adaptee.specificRequest();
    }
}

public class ObjectAdapterExample {
    public static void main(String[] args) {
        Adaptee adaptee = new Adaptee();
        Target target = new ObjectAdapter(adaptee);
        target.request();
    }
}
```

é€‚é…å™¨æ¨¡å¼**å¯ä»¥ç”¨äºè§£å†³ä¸åŒç³»ç»Ÿã€åº“æˆ–APIä¹‹é—´çš„æ¥å£ä¸å…¼å®¹é—®é¢˜**ï¼Œä½¿å¾—å®ƒä»¬å¯ä»¥ååŒå·¥ä½œã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©ä½¿ç”¨ç±»é€‚é…å™¨è¿˜æ˜¯å¯¹è±¡é€‚é…å™¨ã€‚

##### åº”ç”¨åœºæ™¯

| **åº”ç”¨åœºæ™¯åˆ†ç±»** | **å…·ä½“ç¤ºä¾‹**    | **è¯´æ˜**                                   |
| ---------- | ----------- | ---------------------------------------- |
| ç³»ç»Ÿé›†æˆ       | ç¬¬ä¸‰æ–¹åº“æˆ–é—ç•™ç³»ç»Ÿæ•´åˆ | æ–°ç³»ç»Ÿé›†æˆç¬¬ä¸‰æ–¹åº“æˆ–é—ç•™ç³»ç»Ÿæ—¶ï¼Œå°†ä¸å…¼å®¹æ¥å£é€‚é…æˆç³»ç»Ÿå¯ç”¨æ¥å£          |
| ç³»ç»Ÿé›†æˆ       | ä¸åŒç³»ç»Ÿé—´çš„æ•°æ®äº¤äº’  | å®ç°ä¸åŒæ•°æ®æ ¼å¼å’Œæ¥å£åè®®çš„ç³»ç»Ÿé—´çš„æ•°æ®äº¤äº’ï¼Œå¦‚ XML ä¸ JSON æ ¼å¼è½¬æ¢ |
| å¤ç”¨ç°æœ‰ç±»      | å¤ç”¨åŠŸèƒ½ä½†æ¥å£ä¸åŒ¹é…  | ç°æœ‰ç±»åŠŸèƒ½ç¬¦åˆéœ€æ±‚ä½†æ¥å£ä¸åŒ¹é…ï¼Œé€šè¿‡é€‚é…å™¨å¤ç”¨å…¶åŠŸèƒ½               |
| å¤ç”¨ç°æœ‰ç±»      | é€‚é…ä¸åŒç‰ˆæœ¬çš„ç±»æ¥å£  | è½¯ä»¶å‡çº§åç±»æ¥å£å˜åŒ–ï¼Œé€šè¿‡é€‚é…å™¨è®©æ—§ä»£ç èƒ½ä½¿ç”¨æ–°ç‰ˆæœ¬ç±»              |
| æ”¹å–„ä»£ç è®¾è®¡     | åˆ†ç¦»æ¥å£å’Œå®ç°     | å°†ä¸åŒå®ç°ç±»é€‚é…åˆ°ç»Ÿä¸€æ¥å£ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§               |
| æ”¹å–„ä»£ç è®¾è®¡     | ç®€åŒ–å¤æ‚æ¥å£      | å¯¹å¤–æä¾›ç®€åŒ–æ¥å£ï¼Œé™ä½è€¦åˆåº¦ï¼Œæé«˜ä»£ç å¯è¯»æ€§å’Œæ˜“ç”¨æ€§               |

#### ä»£ç†æ¨¡å¼

##### æ¦‚å¿µ

ä»£ç†è®¾è®¡æ¨¡å¼ï¼ˆProxy Design Patternï¼‰æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒä¸ºå…¶ä»–å¯¹è±¡**æä¾›ä¸€ä¸ªä»£ç†**ï¼Œ**ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®**ã€‚ä»£ç†æ¨¡å¼å¯ä»¥ç”¨äºå®ç°æ‡’åŠ è½½ã€å®‰å…¨è®¿é—®æ§åˆ¶ã€æ—¥å¿—è®°å½•ç­‰åŠŸèƒ½ã€‚

åœ¨è®¾è®¡æ¨¡å¼ä¸­ï¼Œä»£ç†æ¨¡å¼å¯ä»¥åˆ†ä¸º**é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†**ã€‚é™æ€ä»£ç†æ˜¯æŒ‡**ä»£ç†ç±»åœ¨ç¼–è¯‘æ—¶**å°±å·²ç»ç¡®å®šï¼Œè€ŒåŠ¨æ€ä»£ç†æ˜¯æŒ‡**ä»£ç†ç±»åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆ**ã€‚

##### ç¤ºä¾‹

ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¼“å­˜ä»£ç†çš„åº”ç”¨ç¤ºä¾‹ï¼š

å‡è®¾æœ‰ä¸€ä¸ªæ•°æ®æŸ¥è¯¢æ¥å£ï¼Œå®ƒä»æ•°æ®åº“æˆ–å…¶ä»–æ•°æ®æºä¸­æ£€ç´¢æ•°æ®ã€‚åœ¨æ²¡æœ‰ç¼“å­˜ä»£ç†çš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡æŸ¥è¯¢éƒ½éœ€è¦è®¿é—®æ•°æ®åº“ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´è¾ƒé«˜çš„èµ„æºæ¶ˆè€—å’Œå»¶è¿Ÿã€‚é€šè¿‡å¼•å…¥ç¼“å­˜ä»£ç†ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŸ¥è¯¢ç»“æœå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œä»è€Œé¿å…é‡å¤æŸ¥è¯¢æ•°æ®åº“ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ•°æ®æŸ¥è¯¢æ¥å£ï¼š

```
public interface DataQuery {
    String query(String queryKey);
}
```

ç„¶åï¼Œå®ç°ä¸€ä¸ªçœŸå®çš„æ•°æ®æŸ¥è¯¢ç±»ï¼Œå®ƒä»æ•°æ®åº“ä¸­æ£€ç´¢æ•°æ®ï¼š

```
public class DatabaseDataQuery implements DataQuery {
    @Override
    public String query(String queryKey) {
        // æŸ¥è¯¢æ•°æ®åº“å¹¶è¿”å›ç»“æœ
        return "Result from database: " + queryKey;
    }
}
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç¼“å­˜ä»£ç†ç±»ï¼Œå®ƒå®ç°äº† DataQuery æ¥å£ï¼Œå¹¶åœ¨å†…éƒ¨ä½¿ç”¨ HashMap ä½œä¸ºç¼“å­˜ï¼š

```
public class CachingDataQueryProxy implements DataQuery {
    private final DataQuery realDataQuery;
    private final Map<String, String> cache;

    public CachingDataQueryProxy(DataQuery realDataQuery) {
        this.realDataQuery = new DatabaseDataQuery();
        cache = new HashMap<>();
    }

    @Override
    public String query(String queryKey) {
        String result = cache.get(queryKey);
        if (result == null) {
            result = realDataQuery.query(queryKey);
            cache.put(queryKey, result);
            System.out.println("Result retrieved from database and added to cache.");
        } else {
            System.out.println("Result retrieved from cache.");
        }
        return result;
    }
}
```

æœ€åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ä½¿ç”¨ç¼“å­˜ä»£ç†ï¼š

```
public class Client {
    public static void main(String[] args) {
        DataQuery realDataQuery = new DatabaseDataQuery();
        DataQuery cachingDataQueryProxy = new CachingDataQueryProxy(realDataQuery);

        String queryKey = "example_key";

        // ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œä»æ•°æ®åº“ä¸­è·å–æ•°æ®å¹¶å°†å…¶ç¼“å­˜
        System.out.println(cachingDataQueryProxy.query(queryKey));

        // ç¬¬äºŒæ¬¡æŸ¥è¯¢ç›¸åŒçš„æ•°æ®ï¼Œä»ç¼“å­˜ä¸­è·å–
        System.out.println(cachingDataQueryProxy.query(queryKey));
    }
}
```

é€šè¿‡è¿™ä¸ªç¤ºä¾‹ï¼Œä½ å¯ä»¥çœ‹åˆ°ç¼“å­˜ä»£ç†å¦‚ä½•æä¾›ç¼“å­˜åŠŸèƒ½ï¼Œä»¥æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚

##### åº”ç”¨åœºæ™¯

| **åº”ç”¨åœºæ™¯åˆ†ç±»** | **å…·ä½“ç¤ºä¾‹**      | **è¯´æ˜**                          |
| ---------- | ------------- | ------------------------------- |
| è¿œç¨‹ä»£ç†       | åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„è¿œç¨‹æœåŠ¡è°ƒç”¨ | éšè—è¿œç¨‹æœåŠ¡è°ƒç”¨çš„å¤æ‚æ€§ï¼Œå¦‚è·¨åŒºåŸŸç”µå•†ç³»ç»Ÿä¸­è®¢å•å¤„ç†æœåŠ¡çš„è°ƒç”¨ |
| è¿œç¨‹ä»£ç†       | è®¿é—®è¿œç¨‹èµ„æº        | å¤„ç†ä¸è¿œç¨‹èµ„æºçš„è¿æ¥ç­‰æ“ä½œï¼Œå¦‚æœ¬åœ°åº”ç”¨è®¿é—®äº‘ç«¯æ•°æ®åº“      |
| è™šæ‹Ÿä»£ç†       | å»¶è¿ŸåŠ è½½å¤§å¯¹è±¡       | é¿å…è¿‡æ—©åˆ›å»ºèµ„æºæ¶ˆè€—å¤§çš„å¯¹è±¡ï¼Œå¦‚å›¾åƒæµè§ˆåº”ç”¨çš„é«˜åˆ†è¾¨ç‡å›¾åƒåŠ è½½ |
| è™šæ‹Ÿä»£ç†       | å¤„ç†èµ„æºå—é™çš„æƒ…å†µ     | åœ¨èµ„æºå—é™ç¯å¢ƒä¸­æŒ‰éœ€åˆ›å»ºå¯¹è±¡ï¼Œå¦‚ç§»åŠ¨åœ°å›¾åº”ç”¨æŒ‰éœ€åŠ è½½åœ°å›¾æ•°æ®  |
| ä¿æŠ¤ä»£ç†       | è®¿é—®æ§åˆ¶          | éªŒè¯ç”¨æˆ·æƒé™ï¼Œå¦‚ä¼ä¸šç³»ç»Ÿä¸­æ•æ„Ÿæ•°æ®çš„è®¿é—®æ§åˆ¶          |
| ä¿æŠ¤ä»£ç†       | æ•°æ®è¿‡æ»¤å’ŒéªŒè¯       | å¯¹è¾“å…¥æ•°æ®è¿›è¡ŒéªŒè¯ï¼Œå¦‚ç”¨æˆ·æ³¨å†Œç³»ç»Ÿå¯¹æ³¨å†Œä¿¡æ¯çš„éªŒè¯       |
| æ™ºèƒ½å¼•ç”¨ä»£ç†     | å¯¹è±¡å¼•ç”¨è®¡æ•°å’Œèµ„æºç®¡ç†   | ç®¡ç†å¯¹è±¡å¼•ç”¨è®¡æ•°å¹¶é‡Šæ”¾èµ„æºï¼Œå¦‚å¤šçº¿ç¨‹åº”ç”¨ä¸­æ•°æ®åº“è¿æ¥çš„ç®¡ç†   |
| æ™ºèƒ½å¼•ç”¨ä»£ç†     | å¯¹è±¡è®¿é—®ç›‘æ§å’Œæ—¥å¿—è®°å½•   | è®°å½•å¯¹è±¡è®¿é—®ä¿¡æ¯ï¼Œå¦‚ä¼ä¸šçº§åº”ç”¨ä¸­å¯¹å…³é”®ä¸šåŠ¡å¯¹è±¡çš„è®¿é—®ç›‘æ§    |

#### è£…é¥°å™¨æ¨¡å¼

##### æ¦‚å¿µ

è£…é¥°å™¨è®¾è®¡æ¨¡å¼ï¼ˆDecoratorï¼‰æ˜¯ä¸€ç§**ç»“æ„å‹è®¾è®¡æ¨¡å¼**ï¼Œå®ƒå…è®¸**åŠ¨æ€åœ°ä¸ºå¯¹è±¡æ·»åŠ æ–°çš„è¡Œä¸º**ã€‚å®ƒé€šè¿‡åˆ›å»ºä¸€ä¸ªåŒ…è£…å™¨æ¥å®ç°ï¼Œå³**å°†å¯¹è±¡æ”¾å…¥ä¸€ä¸ªè£…é¥°å™¨ç±»**ä¸­ï¼Œå†å°†è£…é¥°å™¨ç±»æ”¾å…¥å¦ä¸€ä¸ªè£…é¥°å™¨ç±»ä¸­ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå½¢æˆä¸€æ¡**åŒ…è£…é“¾**ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨**ä¸æ”¹å˜åŸæœ‰å¯¹è±¡**çš„æƒ…å†µä¸‹ï¼Œ**åŠ¨æ€åœ°æ·»åŠ æ–°çš„è¡Œä¸ºæˆ–ä¿®æ”¹åŸæœ‰è¡Œä¸º**ã€‚

##### ç¤ºä¾‹

å®ç°è£…é¥°å™¨è®¾è®¡æ¨¡å¼çš„æ­¥éª¤å¦‚ä¸‹ï¼š

1ã€å®šä¹‰ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»ï¼Œä½œä¸ºè¢«è£…é¥°å¯¹è±¡çš„åŸºç±»ã€‚

```
public interface Component {
    void operation();
}
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º `Component` çš„æ¥å£ï¼Œå®ƒåŒ…å«ä¸€ä¸ªåä¸º `operation` çš„æŠ½è±¡æ–¹æ³•ï¼Œç”¨äºå®šä¹‰è¢«è£…é¥°å¯¹è±¡çš„åŸºæœ¬è¡Œä¸ºã€‚

2ã€å®šä¹‰ä¸€ä¸ªå…·ä½“çš„è¢«è£…é¥°å¯¹è±¡ï¼Œå®ç°åŸºç±»ä¸­çš„æ–¹æ³•ã€‚

```
public class ConcreteComponent implements Component {
    @Override
    public void operation() {
        System.out.println("ConcreteComponent is doing something...");
    }
}
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º `ConcreteComponent` çš„å…·ä½“å®ç°ç±»ï¼Œå®ç°äº† `Component` æ¥å£ä¸­çš„ `operation` æ–¹æ³•ã€‚

3ã€å®šä¹‰ä¸€ä¸ªæŠ½è±¡è£…é¥°å™¨ç±»ï¼Œç»§æ‰¿åŸºç±»ï¼Œå¹¶å°†è¢«è£…é¥°å¯¹è±¡ä½œä¸ºå±æ€§ã€‚

```
public abstract class Decorator implements Component {

    protected Component component;

    public Decorator(Component component) {
        this.component = component;
    }

    @Override
    public void operation() {
        component.operation();
    }
}
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º `Decorator` çš„æŠ½è±¡ç±»ï¼Œå®ç°äº† `Component` æ¥å£ï¼Œå¹¶å°†è¢«è£…é¥°å¯¹è±¡ä½œä¸ºå±æ€§ã€‚åœ¨ `operation` æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨è¢«è£…é¥°å¯¹è±¡çš„åŒåæ–¹æ³•ã€‚

4ã€å®šä¹‰å…·ä½“çš„è£…é¥°å™¨ç±»ï¼Œç»§æ‰¿æŠ½è±¡è£…é¥°å™¨ç±»ï¼Œå¹¶å®ç°å¢å¼ºé€»è¾‘ã€‚

```
public class ConcreteDecoratorA extends Decorator {

    public ConcreteDecoratorA(Component component) {
        super(component);
    }

    @Override
    public void operation() {
        super.operation();
        System.out.println("ConcreteDecoratorA is adding new behavior...");
    }
}
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º `ConcreteDecoratorA` çš„å…·ä½“è£…é¥°å™¨ç±»ï¼Œç»§æ‰¿äº† `Decorator` æŠ½è±¡ç±»ï¼Œå¹¶å®ç°äº† `operation` æ–¹æ³•çš„å¢å¼ºé€»è¾‘ã€‚åœ¨ `operation` æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å…ˆè°ƒç”¨è¢«è£…é¥°å¯¹è±¡çš„åŒåæ–¹æ³•ï¼Œç„¶åæ·»åŠ æ–°çš„è¡Œä¸ºã€‚

5ã€ä½¿ç”¨è£…é¥°å™¨å¢å¼ºè¢«è£…é¥°å¯¹è±¡ã€‚

```
public class Main {
    public static void main(String[] args) {
        Component component = new ConcreteComponent();
        component = new ConcreteDecoratorA(component);
        component.operation();
    }
}
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºäº†ä¸€ä¸ªè¢«è£…é¥°å¯¹è±¡ `ConcreteComponent`ï¼Œç„¶åé€šè¿‡ `ConcreteDecoratorA` ç±»åˆ›å»ºäº†ä¸€ä¸ªè£…é¥°å™¨ï¼Œå¹¶å°†è¢«è£…é¥°å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚æœ€åï¼Œè°ƒç”¨è£…é¥°å™¨çš„ `operation` æ–¹æ³•ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å¯¹è¢«è£…é¥°å¯¹è±¡çš„å¢å¼ºã€‚

##### åº”ç”¨åœºæ™¯

|   |   |   |
|---|---|---|
|å¢å¼ºç°æœ‰å¯¹è±¡åŠŸèƒ½|ä¸ºæ–‡ä»¶è¾“å…¥è¾“å‡ºæ“ä½œæ·»åŠ åŠŸèƒ½|åœ¨ä¸ä¿®æ”¹åŸå§‹æ–‡ä»¶æ“ä½œç±»çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ ç¼“å†²ã€åŠ å¯†ç­‰åŠŸèƒ½|
|å¢å¼ºç°æœ‰å¯¹è±¡åŠŸèƒ½|ä¸ºå›¾å½¢ç•Œé¢ç»„ä»¶æ·»åŠ ç‰¹æ•ˆ|ä¸º GUI ç»„ä»¶æ·»åŠ é˜´å½±ã€å‘å…‰ç­‰ç‰¹æ•ˆï¼Œä¸°å¯Œç•Œé¢æ•ˆæœ|
|åŠ¨æ€æ·»åŠ æˆ–ç§»é™¤åŠŸèƒ½|æ¸¸æˆè§’è‰²èƒ½åŠ›å¢å¼º|åŠ¨æ€ä¸ºæ¸¸æˆè§’è‰²æ·»åŠ æˆ–ç§»é™¤åŠ é€Ÿã€éšèº«ç­‰ç‰¹æ®Šèƒ½åŠ›|
|åŠ¨æ€æ·»åŠ æˆ–ç§»é™¤åŠŸèƒ½|ç”µå•†ç³»ç»Ÿä¸­è®¢å•å¤„ç†åŠŸèƒ½æ‰©å±•|æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼ŒåŠ¨æ€ä¸ºè®¢å•å¤„ç†æ·»åŠ æˆ–ç§»é™¤æŠ˜æ‰£è®¡ç®—ç­‰åŠŸèƒ½|
|éµå¾ªå¼€é—­åŸåˆ™ï¼Œå‡å°‘å­ç±»æ•°é‡|æ—¥å¿—è®°å½•åŠŸèƒ½æ‰©å±•|é€šè¿‡è£…é¥°å™¨ä¸ºå¤šä¸ªä¸šåŠ¡é€»è¾‘æ–¹æ³•æ·»åŠ æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œå‡å°‘å­ç±»æ•°é‡|
|éµå¾ªå¼€é—­åŸåˆ™ï¼Œå‡å°‘å­ç±»æ•°é‡|æƒé™éªŒè¯åŠŸèƒ½å¤ç”¨|åˆ›å»ºæƒé™éªŒè¯è£…é¥°å™¨ï¼Œå¤ç”¨æƒé™éªŒè¯åŠŸèƒ½ï¼Œå‡å°‘ä»£ç å†—ä½™|

#### è´£ä»»é“¾æ¨¡å¼

##### æ¦‚å¿µ

å°†è¯·æ±‚çš„å‘é€å’Œæ¥æ”¶è§£è€¦ï¼Œè®©å¤šä¸ªæ¥æ”¶å¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚å°†è¿™äº›æ¥æ”¶å¯¹è±¡ä¸²æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¿™ä¸ªè¯·æ±‚ï¼Œ**ç›´åˆ°é“¾ä¸Šçš„æŸä¸ªæ¥æ”¶å¯¹è±¡èƒ½å¤Ÿå¤„ç†å®ƒä¸ºæ­¢**ï¼Œå®é™…ä¸Šï¼Œåœ¨å¸¸è§çš„ä½¿ç”¨åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬çš„è´£ä»»é“¾å¹¶ä¸æ˜¯å’Œæ¦‚å¿µä¸­çš„å®Œå…¨ä¸€æ ·ã€‚

- åŸå§‹æ¦‚å¿µä¸­ï¼Œæ˜¯ç›´åˆ°é“¾ä¸Šçš„æŸä¸ªæ¥æ”¶å¯¹è±¡èƒ½å¤Ÿå¤„ç†å®ƒä¸ºæ­¢ã€‚
- å®é™…ä½¿ç”¨ä¸­ï¼Œé“¾ä¸Šçš„æ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥å¯¹è¯·æ±‚è¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚

##### ç¤ºä¾‹

```
public abstract class Handler {
    protected Handler successor = null;
    public void setSuccessor(Handler successor) {
        this.successor = successor;
    }
    public final void handle() {
        boolean handled = doHandle();
        if (successor != null && !handled) {
            successor.handle();
        }
    }
    protected abstract boolean doHandle();
}

public class HandlerA extends Handler {
    @Override
    protected boolean doHandle() {
        boolean handled = false;
        //...
        return handled;
    }
}

public class HandlerB extends Handler {
    @Override
    protected boolean doHandle() {
        boolean handled = false;
        //...
        return handled;
    }
}
public class HandlerChain {
    private Handler head = null;
    private Handler tail = null;
    public void addHandler(Handler handler) {
        handler.setSuccessor(null);
        if (head == null) {
            head = handler;
            tail = handler;
            return;
        }
        tail.setSuccessor(handler);
        tail = handler;
    }
    public void handle() {
        if (head != null) {
            head.handle();
        }
    }
}

// ä½¿ç”¨ä¸¾ä¾‹
public class Application {
    public static void main(String[] args) {
        HandlerChain chain = new HandlerChain();
        chain.addHandler(new HandlerA());
        chain.addHandler(new HandlerB());
        chain.handle();
    }
}
```

##### åº”ç”¨åœºæ™¯

| **åº”ç”¨åœºæ™¯åˆ†ç±»** | **å…·ä½“ç¤ºä¾‹**        | **è¯´æ˜**              |
| ---------- | --------------- | ------------------- |
| å®¡æ‰¹æµç¨‹       | è¯·å‡å®¡æ‰¹            | æ ¹æ®è¯·å‡å¤©æ•°ä¸åŒï¼Œç”±ä¸åŒé¢†å¯¼æŒ‰é¡ºåºå®¡æ‰¹ |
| å®¡æ‰¹æµç¨‹       | è´¹ç”¨æŠ¥é”€å®¡æ‰¹          | ä¾æ®æŠ¥é”€é‡‘é¢ï¼Œç»ä¸åŒå±‚çº§å®¡æ‰¹      |
| äº‹ä»¶å¤„ç†       | å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰äº‹ä»¶å¤„ç† | ç”¨æˆ·æ“ä½œäº‹ä»¶æ²¿ç»„ä»¶é“¾ä¼ é€’å¤„ç†      |
| äº‹ä»¶å¤„ç†       | æ¸¸æˆä¸­çš„è¾“å…¥äº‹ä»¶å¤„ç†      | ç©å®¶è¾“å…¥äº‹ä»¶åœ¨æ¸¸æˆå¯¹è±¡é“¾ä¸­ä¼ é€’å¤„ç†   |
| è¿‡æ»¤å’ŒéªŒè¯      | æ•°æ®è¿‡æ»¤            | ç”¨æˆ·è¾“å…¥æ•°æ®ä¾æ¬¡ç»å¤šä¸ªè¿‡æ»¤å™¨å¤„ç†    |
| è¿‡æ»¤å’ŒéªŒè¯      | è¯·æ±‚éªŒè¯            | å®¢æˆ·ç«¯è¯·æ±‚ä¾æ¬¡ç»å¤šä¸ªéªŒè¯å™¨éªŒè¯     |

#### è§‚å¯Ÿè€…æ¨¡å¼

##### æ¦‚å¿µ

è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå…è®¸å¯¹è±¡é—´å­˜åœ¨**ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»**ï¼Œå½“**ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°**ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œ**å‘ç”ŸçŠ¶æ€æ”¹å˜çš„å¯¹è±¡è¢«ç§°ä¸ºâ€œä¸»é¢˜â€ï¼ˆSubjectï¼‰ï¼Œä¾èµ–å®ƒçš„å¯¹è±¡è¢«ç§°ä¸ºâ€œè§‚å¯Ÿè€…â€ï¼ˆObserverï¼‰ã€‚**

**è§‚å¯Ÿè€…æ¨¡å¼**ï¼ˆObserver Design Patternï¼‰ä¹Ÿè¢«ç§°ä¸º**å‘å¸ƒè®¢é˜…æ¨¡å¼**ï¼ˆPublish-Subscribe Design Patternï¼‰ã€‚

##### ç¤ºä¾‹

é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥å®ç°è§‚å¯Ÿè€…æ¨¡å¼ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ°”è±¡ç«™ï¼ˆWeatherStationï¼‰ï¼Œéœ€è¦å‘è®¸å¤šä¸åŒçš„æ˜¾ç¤ºè®¾å¤‡ï¼ˆå¦‚æ‰‹æœºAppã€ç½‘ç«™ã€ç”µå­å±å¹•ç­‰ï¼‰æä¾›å®æ—¶å¤©æ°”æ•°æ®ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªSubjectæ¥å£ï¼Œ**è¡¨ç¤ºä¸»é¢˜**ï¼š

```
public interface Subject {
    void registerObserver(Observer o);
    void removeObserver(Observer o);
    void notifyObservers();
}
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªObserveræ¥å£ï¼Œ**è¡¨ç¤ºè§‚å¯Ÿè€…**ï¼š

```
public interface Observer {
    void update(float temperature, float humidity, float pressure);
}
```

ç°åœ¨ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª**å…·ä½“çš„ä¸»é¢˜**ï¼Œå¦‚WeatherStationï¼Œå®ç°Subjectæ¥å£ï¼š

```
public class WeatherStation implements Subject {
    private ArrayList<Observer> observers;
    // æ¸©åº¦
    private float temperature;
    // æ¹¿åº¦
    private float humidity;
    // å¤§æ°”å‹
    private float pressure;

    public WeatherStation() {
        observers = new ArrayList<>();
    }

    // æ³¨å†Œä¸€ä¸ªè§‚å¯Ÿè€…çš„æ–¹æ³•
    @Override
    public void registerObserver(Observer o) {
        observers.add(o);
    }

    // ç§»é™¤ä¸€ä¸ªè§‚å¯Ÿè€…çš„æ–¹æ³•
    @Override
    public void removeObserver(Observer o) {
        int index = observers.indexOf(o);
        if (index >= 0) {
            observers.remove(index);
        }
    }

    // é€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…
    @Override
    public void notifyObservers() {
        // å¾ªç¯æ‰€æœ‰çš„è§‚å¯Ÿè€…ï¼Œé€šçŸ¥å…¶å½“å‰çš„æ°”è±¡ä¿¡æ¯
        for (Observer o : observers) {
            o.update(temperature, humidity, pressure);
        }
    }

    // ä¿®æ”¹æ°”è±¡å†…å®¹
    public void measurementsChanged() {
        notifyObservers();
    }

    // å½“æµ‹é‡å€¼å‘ç”Ÿäº†å˜åŒ–çš„æ—¶å€™
    public void setMeasurements(float temperature, float humidity, float pressure) {
        this.temperature = temperature;
        this.humidity = humidity;
        this.pressure = pressure;
        // æµ‹é‡å€¼å‘ç”Ÿäº†å˜åŒ–
        measurementsChanged();
    }
}
```

æœ€åï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå…·ä½“çš„è§‚å¯Ÿè€…ï¼Œå¦‚PhoneAppï¼Œå®ç°Observeræ¥å£ï¼š

```
public class PhoneApp implements Observer {
    private float temperature;
    private float humidity;
    private float pressure;
    private Subject weatherStation;

    public PhoneApp(Subject weatherStation) {
        this.weatherStation = weatherStation;
        weatherStation.registerObserver(this);
    }

    @Override
    public void update(float temperature, float humidity, float pressure) {
        this.temperature = temperature;
        this.humidity = humidity;
        this.pressure = pressure;
        display();
    }

    public void display() {
        System.out.println("PhoneApp: Temperature: " + temperature + "Â°C, Humidity: " + humidity + "%, Pressure: " + pressure + " hPa");
    }
}
```

ç°åœ¨æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªWeatherStationå®ä¾‹å¹¶å‘å…¶æ³¨å†ŒPhoneAppè§‚å¯Ÿè€…ã€‚å½“WeatherStationçš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒPhoneAppä¼šæ”¶åˆ°é€šçŸ¥å¹¶æ›´æ–°è‡ªå·±çš„æ˜¾ç¤ºã€‚

```
public class Main {
    public static void main(String[] args) {
        WeatherStation weatherStation = new WeatherStation();
        PhoneApp phoneApp = new PhoneApp(weatherStation);
        // æ¨¡æ‹Ÿæ°”è±¡ç«™æ•°æ®æ›´æ–°
        weatherStation.setMeasurements(25, 65, 1010);
        weatherStation.setMeasurements(22, 58, 1005);

        // æ·»åŠ æ›´å¤šè§‚å¯Ÿè€…  ç½‘ç«™ä¸Šæ˜¾ç¤º-ç”µå­å¤§å±
        WebsiteDisplay websiteDisplay = new WebsiteDisplay(weatherStation);
        ElectronicScreen electronicScreen = new ElectronicScreen(weatherStation);

        // å†æ¬¡æ¨¡æ‹Ÿæ°”è±¡ç«™æ•°æ®æ›´æ–°
        weatherStation.setMeasurements(18, 52, 1008);
    }
}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬**åˆ›å»ºäº†ä¸€ä¸ªWeatherStationå®ä¾‹**ï¼Œå¹¶å‘å…¶æ³¨å†Œäº†PhoneAppã€WebsiteDisplayå’ŒElectronicScreenè§‚å¯Ÿè€…ã€‚å½“WeatherStationçš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰è§‚å¯Ÿè€…éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶æ›´æ–°è‡ªå·±çš„æ˜¾ç¤ºã€‚ è¿™ä¸ªä¾‹å­å±•ç¤ºäº†è§‚å¯Ÿè€…æ¨¡å¼çš„ä¼˜ç‚¹ï¼š

1. **è§‚å¯Ÿè€…å’Œä¸»é¢˜ä¹‹é—´çš„è§£è€¦**ï¼šä¸»é¢˜åªéœ€è¦çŸ¥é“è§‚å¯Ÿè€…å®ç°äº†Observeræ¥å£ï¼Œè€Œæ— éœ€äº†è§£å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚
2. **å¯ä»¥åŠ¨æ€æ·»åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…**ï¼šé€šè¿‡è°ƒç”¨registerObserverå’ŒremoveObserveræ–¹æ³•ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶æ·»åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…ã€‚
3. **ä¸»é¢˜å’Œè§‚å¯Ÿè€…ä¹‹é—´çš„é€šä¿¡æ˜¯è‡ªåŠ¨çš„**ï¼šå½“ä¸»é¢˜çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§‚å¯Ÿè€…ä¼šè‡ªåŠ¨å¾—åˆ°é€šçŸ¥å¹¶æ›´æ–°è‡ªå·±çš„çŠ¶æ€ã€‚

##### åº”ç”¨åœºæ™¯

| **åº”ç”¨åœºæ™¯åˆ†ç±»**    | **å…·ä½“ç¤ºä¾‹**    | **è¯´æ˜**            |
| ------------- | ----------- | ----------------- |
| æ¶ˆæ¯é€šçŸ¥ç³»ç»Ÿ        | é‚®ä»¶è®¢é˜…æœåŠ¡      | ä¸»é¢˜æ›´æ–°æ—¶é€šçŸ¥è®¢é˜…ç”¨æˆ·æ¥æ”¶æ–°é‚®ä»¶  |
| æ¶ˆæ¯é€šçŸ¥ç³»ç»Ÿ        | å³æ—¶é€šè®¯è½¯ä»¶çš„ç¾¤ç»„é€šçŸ¥ | ç¾¤çŠ¶æ€æ”¹å˜æ—¶é€šçŸ¥ç¾¤æˆå‘˜       |
| å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰è®¾è®¡ | æŒ‰é’®çŠ¶æ€å˜åŒ–é€šçŸ¥    | æŒ‰é’®çŠ¶æ€æ”¹å˜æ—¶é€šçŸ¥ç›¸å…³ç»„ä»¶æ›´æ–°   |
| å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰è®¾è®¡ | çª—å£å¤§å°è°ƒæ•´é€šçŸ¥    | çª—å£å¤§å°æ”¹å˜æ—¶é€šçŸ¥å†…éƒ¨ç»„ä»¶è°ƒæ•´   |
| æ¸¸æˆå¼€å‘          | æ¸¸æˆè§’è‰²çŠ¶æ€å˜åŒ–    | è§’è‰²çŠ¶æ€æ”¹å˜æ—¶é€šçŸ¥ç›¸å…³æ¸¸æˆå…ƒç´    |
| æ¸¸æˆå¼€å‘          | æ¸¸æˆåœºæ™¯äº‹ä»¶é€šçŸ¥    | åœºæ™¯äº‹ä»¶å‘ç”Ÿæ—¶é€šçŸ¥ç©å®¶å’Œç›¸å…³å¯¹è±¡  |
| ç³»ç»Ÿæ¶æ„ä¸­çš„æ¨¡å—é€šä¿¡    | ä¸šåŠ¡é€»è¾‘ä¸æ•°æ®å±‚é€šä¿¡  | æ•°æ®å±‚æ•°æ®å˜åŒ–æ—¶é€šçŸ¥ä¸šåŠ¡é€»è¾‘å±‚å¤„ç† |
| ç³»ç»Ÿæ¶æ„ä¸­çš„æ¨¡å—é€šä¿¡    | ä¸åŒæ¨¡å—é—´çš„çŠ¶æ€åŒæ­¥  | ä¸€ä¸ªæ¨¡å—çŠ¶æ€æ”¹å˜æ—¶é€šçŸ¥ç›¸å…³æ¨¡å—åŒæ­¥ |

#### ç­–ç•¥æ¨¡å¼

##### æ¦‚å¿µ

å®šä¹‰ä¸€æ—ç®—æ³•ç±»ï¼Œå°†æ¯ä¸ªç®—æ³•åˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©å®ƒä»¬å¯ä»¥äº’ç›¸æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼å¯ä»¥ä½¿ç®—æ³•çš„å˜åŒ–ç‹¬ç«‹äºä½¿ç”¨å®ƒä»¬çš„å®¢æˆ·ç«¯ï¼ˆè¿™é‡Œçš„å®¢æˆ·ç«¯ä»£æŒ‡ä½¿ç”¨ç®—æ³•çš„ä»£ç ï¼‰

ç­–ç•¥æ¨¡å¼ä¸»è¦åŒ…å«ä»¥ä¸‹è§’è‰²ï¼š

1. **ç­–ç•¥æ¥å£ï¼ˆStrategyï¼‰**ï¼šå®šä¹‰æ‰€æœ‰æ”¯æŒçš„ç®—æ³•çš„å…¬å…±æ¥å£ã€‚å®¢æˆ·ç«¯ä½¿ç”¨è¿™ä¸ªæ¥å£ä¸å…·ä½“ç­–ç•¥è¿›è¡Œäº¤äº’ã€‚
2. **å…·ä½“ç­–ç•¥ï¼ˆConcrete Strategyï¼‰**ï¼šå®ç°ç­–ç•¥æ¥å£çš„å…·ä½“ç­–ç•¥ç±»ã€‚è¿™äº›ç±»å°è£…äº†å®é™…çš„ç®—æ³•é€»è¾‘ã€‚
3. **ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰**ï¼šæŒæœ‰ä¸€ä¸ªç­–ç•¥å¯¹è±¡ï¼Œç”¨äºä¸å®¢æˆ·ç«¯è¿›è¡Œäº¤äº’ã€‚ä¸Šä¸‹æ–‡å¯ä»¥å®šä¹‰ä¸€äº›æ¥å£ï¼Œè®©å®¢æˆ·ç«¯ä¸ç›´æ¥ä¸ç­–ç•¥æ¥å£äº¤äº’ï¼Œä»è€Œå®ç°ç­–ç•¥çš„å°è£…ã€‚

##### ç¤ºä¾‹

ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜ç­–ç•¥æ¨¡å¼ï¼šå‡è®¾æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªè®¡ç®—å™¨ï¼Œæ”¯æŒ**åŠ æ³•ã€å‡æ³•å’Œä¹˜æ³•è¿ç®—**ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼å°†**å„ç§è¿ç®—ç‹¬ç«‹ä¸ºä¸åŒçš„ç­–ç•¥**ï¼Œå¹¶è®©å®¢æˆ·ç«¯æ ¹æ®éœ€è¦é€‰æ‹©å’Œä½¿ç”¨ä¸åŒçš„ç­–ç•¥ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç­–ç•¥æ¥å£`Operation`ï¼š

```
public interface Operation {
    double execute(double num1, double num2);
}
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºå…·ä½“ç­–ç•¥ç±»æ¥å®ç°åŠ æ³•ã€å‡æ³•å’Œä¹˜æ³•è¿ç®—ï¼š

```
public class Addition implements Operation {
    @Override
    public double execute(double num1, double num2) {
        return num1 + num2;
    }
}

public class Subtraction implements Operation {
    @Override
    public double execute(double num1, double num2) {
        return num1 - num2;
    }
}

public class Multiplication implements Operation {
    @Override
    public double execute(double num1, double num2) {
        return num1 * num2;
    }
}
```

ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡ç±»`Calculator`ï¼Œè®©å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»æ¥æ‰§è¡Œä¸åŒçš„è¿ç®—ï¼š

```
public class Calculator {
    private Operation operation;

    public void setOperation(Operation operation) {
        this.operation = operation;
    }

    public double executeOperation(double num1, double num2) {
        return operation.execute(num1, num2);
    }
}
```

ç°åœ¨ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨`Calculator`ç±»æ¥æ‰§è¡Œä¸åŒçš„è¿ç®—ï¼Œä¾‹å¦‚ï¼š

```
public class Client {
    public static void main(String[] args) {
        Calculator calculator = new Calculator();

        calculator.setOperation(new Addition());
        System.out.println("10 + 5 = " + calculator.executeOperation(10, 5));

        calculator.setOperation(new Subtraction());
        System.out.println("10 - 5 = " + calculator.executeOperation(10, 5));

        calculator.setOperation(new Multiplication());
        System.out.println("10 * 5 = " + calculator.executeOperation(10,5));
    }
}
```

##### åº”ç”¨åœºæ™¯

|   |   |   |
|---|---|---|
|ç®—æ³•å¤šæ ·åŒ–ä¸”éœ€è¦åŠ¨æ€åˆ‡æ¢|æ¸¸æˆä¸­çš„è§’è‰²è¡Œä¸º|ä¸åŒè§’è‰²çš„æ”»å‡»ã€ç§»åŠ¨ç­‰è¡Œä¸ºå¯é€šè¿‡åˆ‡æ¢ç­–ç•¥æ”¹å˜|
|ç®—æ³•å¤šæ ·åŒ–ä¸”éœ€è¦åŠ¨æ€åˆ‡æ¢|ç”µå•†ç³»ç»Ÿä¸­çš„ä¿ƒé”€æ´»åŠ¨|ä¸åŒä¿ƒé”€æ´»åŠ¨é‡‡ç”¨ä¸åŒç­–ç•¥è®¡ç®—å•†å“ä»·æ ¼|
|ä»£ç å¤ç”¨ä¸ç»´æŠ¤|æ•°æ®æ’åºç®—æ³•|ä¸åŒæ’åºç®—æ³•å°è£…æˆç­–ç•¥ç±»ï¼Œæé«˜å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§|
|ä»£ç å¤ç”¨ä¸ç»´æŠ¤|æ–‡ä»¶æ ¼å¼è½¬æ¢|ä¸åŒæ–‡ä»¶æ ¼å¼è½¬æ¢é€»è¾‘å°è£…æˆç­–ç•¥ç±»ï¼Œæ–¹ä¾¿æ‰©å±•|
|æ¡ä»¶åˆ¤æ–­é€»è¾‘å¤æ‚|ç”¨æˆ·æƒé™æ§åˆ¶|ä¸åŒè§’è‰²çš„æƒé™æ§åˆ¶é€»è¾‘å°è£…æˆç­–ç•¥ç±»ï¼Œç®€åŒ–åˆ¤æ–­|
|æ¡ä»¶åˆ¤æ–­é€»è¾‘å¤æ‚|è®¢å•å¤„ç†æµç¨‹|ä¸åŒè®¢å•ç±»å‹å’Œæ¡ä»¶ä¸‹çš„å¤„ç†é€»è¾‘å°è£…æˆç­–ç•¥ç±»ï¼Œä¼˜åŒ–ä»£ç |

#### æ¨¡æ¿æ–¹æ³•æ¨¡å¼

##### æ¦‚å¿µ

æ¨¡æ¿æ–¹æ³•æ¨¡å¼åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­å®šä¹‰ä¸€ä¸ª**ç®—æ³•éª¨æ¶**ï¼Œå¹¶å°†æŸäº›æ­¥éª¤**æ¨è¿Ÿåˆ°å­ç±»ä¸­å®ç°**ã€‚æ¨¡æ¿æ–¹æ³•æ¨¡å¼å¯ä»¥è®©å­ç±»åœ¨ä¸æ”¹å˜ç®—æ³•æ•´ä½“ç»“æ„çš„æƒ…å†µä¸‹ï¼Œ**é‡æ–°å®šä¹‰ç®—æ³•ä¸­çš„æŸäº›æ­¥éª¤**ã€‚

##### ç¤ºä¾‹

ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„Javaç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼ï¼š

1ã€é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®šä¹‰ç®—æ³•çš„éª¨æ¶ï¼š

```
public abstract class AbstractTemplate {
    // æ¨¡æ¿æ–¹æ³•ï¼Œå®šä¹‰ç®—æ³•çš„éª¨æ¶
    public final void templateMethod() {
        step1();
        step2();
        step3();
    }

    // åŸºæœ¬æ–¹æ³•ï¼Œå®šä¹‰ç®—æ³•ä¸­ä¸ä¼šå˜åŒ–çš„æ­¥éª¤
    private void step1() {
        System.out.println("Step 1: Prepare the ingredients.");
    }

    // æŠ½è±¡æ–¹æ³•ï¼Œå®šä¹‰ç®—æ³•ä¸­éœ€è¦å­ç±»å®ç°çš„æ­¥éª¤
    protected abstract void step2();

    // åŸºæœ¬æ–¹æ³•ï¼Œå®šä¹‰ç®—æ³•ä¸­ä¸ä¼šå˜åŒ–çš„æ­¥éª¤
    private void step3() {
        System.out.println("Step 3: Serve the dish.");
    }
}
```

2ã€ç„¶åï¼Œåˆ›å»ºå…·ä½“çš„å­ç±»ï¼Œå®ç°æŠ½è±¡ç±»ä¸­å®šä¹‰çš„æŠ½è±¡æ–¹æ³•ï¼š

```
public class ConcreteTemplateA extends AbstractTemplate {
    @Override
    protected void step2() {
        System.out.println("Step 2 (A): Cook the dish using method A.");
    }
}

public class ConcreteTemplateB extends AbstractTemplate {
    @Override
    protected void step2() {
        System.out.println("Step 2 (B): Cook the dish using method B.");
    }
}
```

3ã€æœ€åï¼Œåœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ä½¿ç”¨æ¨¡æ¿æ–¹æ³•ï¼š

```
public class Main {
    public static void main(String[] args) {
        AbstractTemplate templateA = new ConcreteTemplateA();
        AbstractTemplate templateB = new ConcreteTemplateB();

        System.out.println("Using Template A:");
        templateA.templateMethod();

        System.out.println("\nUsing Template B:");
        templateB.templateMethod();
    }
}
```

è¿è¡Œä¸Šé¢çš„ç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š

```
Using Template A:
Step 1: Prepare the ingredients.
Step 2 (A): Cook the dish using method A.
Step 3: Serve the dish.

Using Template B:
Step 1: Prepare the ingredients.
Step 2 (B): Cook the dish using method B.
Step 3: Serve the dish.
```

##### åº”ç”¨åœºæ™¯


| **åº”ç”¨åœºæ™¯åˆ†ç±»**               | **å…·ä½“ç¤ºä¾‹** | **è¯´æ˜**                   |
| ------------------------ | -------- | ------------------------ |
| å¤šä¸ªå­ç±»æœ‰ç›¸åŒçš„åŸºæœ¬ç®—æ³•ç»“æ„ï¼Œä½†éƒ¨åˆ†æ­¥éª¤å®ç°ä¸åŒ | æ–‡ä»¶è¯»å–æ“ä½œ   | ä¸åŒç±»å‹æ–‡ä»¶è¯»å–æµç¨‹ç›¸ä¼¼ï¼Œéƒ¨åˆ†æ­¥éª¤å®ç°ä¸åŒ    |
| å¤šä¸ªå­ç±»æœ‰ç›¸åŒçš„åŸºæœ¬ç®—æ³•ç»“æ„ï¼Œä½†éƒ¨åˆ†æ­¥éª¤å®ç°ä¸åŒ | æ•°æ®åº“æ“ä½œ    | ä¸åŒæ•°æ®åº“æ“ä½œæµç¨‹ç›¸ä¼¼ï¼Œå…·ä½“æ“ä½œå®ç°ä¸åŒ     |
| å›ºå®šç®—æ³•æµç¨‹ï¼Œä½†éœ€è¦æ ¹æ®ä¸åŒä¸šåŠ¡åœºæ™¯è¿›è¡Œå®šåˆ¶åŒ–  | æ¸¸æˆè§’è‰²å‡çº§æµç¨‹ | ä¸åŒè§’è‰²å‡çº§æµç¨‹ç›¸ä¼¼ï¼Œå®šåˆ¶éƒ¨åˆ†å‡çº§æ­¥éª¤      |
| å›ºå®šç®—æ³•æµç¨‹ï¼Œä½†éœ€è¦æ ¹æ®ä¸åŒä¸šåŠ¡åœºæ™¯è¿›è¡Œå®šåˆ¶åŒ–  | ç”µå•†è®¢å•å¤„ç†æµç¨‹ | ä¸åŒè®¢å•å¤„ç†æµç¨‹ç›¸ä¼¼ï¼Œå®šåˆ¶éƒ¨åˆ†å¤„ç†æ­¥éª¤      |
| ä»£ç å¤ç”¨ä¸æ‰©å±•                  | æŠ¥è¡¨ç”Ÿæˆ     | ä¸åŒæŠ¥è¡¨ç”Ÿæˆæµç¨‹ç›¸ä¼¼ï¼Œå¤ç”¨é€šç”¨æµç¨‹ï¼Œæ‰©å±•å…·ä½“å®ç° |

## ä½ è®¤ä¸ºå¥½çš„ä»£ç åº”è¯¥æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ

å‘ƒï¼Œæˆ‘è®¤ä¸ºå¥½çš„ä»£ç å¯ä»¥ä¸€éè¿‡Review codeã€‚ï¼ˆå“ˆå“ˆå“ˆå“ˆï¼‰

### åŠŸèƒ½æ–¹é¢

- **èƒ½æŠŠäº‹å„¿åšå¯¹**ï¼šå†™ä»£ç å°±æ˜¯ä¸ºäº†å®ç°ä¸€äº›åŠŸèƒ½ï¼Œå¥½ä»£ç å¾—ä¿è¯åœ¨å„ç§æƒ…å†µä¸‹éƒ½èƒ½æŠŠè¿™äº›åŠŸèƒ½å®ç°å¾—ç¨³ç¨³å½“å½“ã€‚å°±åƒä¸€ä¸ªè®¡ç®—å™¨ç¨‹åºï¼Œä¸ç®¡è¾“å…¥å•¥æ•°å­—ã€å•¥è¿ç®—ï¼Œç®—å‡ºæ¥çš„ç»“æœéƒ½å¾—æ˜¯å¯¹çš„ã€‚è¦æ˜¯ç®—é”™äº†ï¼Œé‚£è¿™ä»£ç è‚¯å®šä¸è¡Œã€‚
- **åŠŸèƒ½é½å…¨æ²¡é—æ¼**ï¼šä»£ç å¾—æŠŠè¯¥æœ‰çš„åŠŸèƒ½éƒ½åŒ…å«è¿›å»ï¼Œä¸èƒ½ç¼ºè¿™å°‘é‚£çš„ã€‚æ‹¿ä¸€ä¸ªåšå¤–å–çš„ APP ä»£ç æ¥è¯´ï¼Œä»ç”¨æˆ·é€‰é¤ã€ä¸‹å•ã€æ”¯ä»˜ï¼Œåˆ°å•†å®¶æ¥å•ã€é…é€ï¼Œå†åˆ°ç”¨æˆ·è¯„ä»·ï¼Œè¿™äº›ç¯èŠ‚ä¸€ä¸ªéƒ½ä¸èƒ½å°‘ï¼Œè¦æ˜¯å°‘äº†å“ªä¸ªç¯èŠ‚ï¼Œè¿™ä¸ªå¤–å–ç³»ç»Ÿå°±æ²¡æ³•æ­£å¸¸ç”¨äº†ã€‚

### è¯»èµ·æ¥æ–¹é¢

- **ç»“æ„æ¸…æ¥šåƒæ­ç§¯æœ¨**ï¼šå¥½ä»£ç çš„ç»“æ„å°±åƒæ­ç§¯æœ¨ä¸€æ ·ï¼Œä¸€å—ä¸€å—çš„åŠŸèƒ½æ¨¡å—åˆ†å¾—å¾ˆæ¸…æ¥šï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±æ˜ç¡®çš„ä»»åŠ¡ã€‚å°±å¥½æ¯”ç›–æˆ¿å­ï¼Œå®¢å…ã€å§å®¤ã€å¨æˆ¿è¿™äº›åŠŸèƒ½åŒºåŸŸåˆ’åˆ†å¾—æ˜æ˜ç™½ç™½ï¼Œè¿™æ ·åˆ«äººçœ‹ä»£ç çš„æ—¶å€™ï¼Œä¸€ä¸‹å­å°±èƒ½çŸ¥é“æ¯ä¸ªéƒ¨åˆ†æ˜¯å¹²å•¥çš„ï¼Œä»¥åè¦æ”¹ä»£ç æˆ–è€…åŠ åŠŸèƒ½ä¹Ÿæ–¹ä¾¿ã€‚
- **åå­—å–å¾—å¥½æ‡‚**ï¼šä»£ç é‡Œçš„å˜é‡åã€å‡½æ•°åã€ç±»åï¼Œå°±åƒäººçš„åå­—ä¸€æ ·ï¼Œå¾—è®©äººä¸€çœ‹å°±çŸ¥é“æ˜¯å¹²å•¥çš„ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªç»Ÿè®¡å­¦ç”Ÿæˆç»©æ€»åˆ†çš„å‡½æ•°ï¼Œå–åå« â€œcalculateTotalScoreâ€ï¼Œè¿™æ ·å¤§å®¶ä¸€çœ‹åå­—å°±çŸ¥é“è¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥ç®—æ€»åˆ†çš„ï¼Œå¤šæ¸…æ¥šã€‚
- **æ³¨é‡Šå†™å¾—è´´å¿ƒ**ï¼šæ³¨é‡Šå°±æ˜¯ç»™ä»£ç å†™çš„ â€œå°è¯´æ˜â€ï¼Œåœ¨ä¸€äº›éš¾æ‡‚çš„ä»£ç æ—è¾¹ï¼Œå†™å‡ å¥æ³¨é‡Šï¼Œè§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç åœ¨å¹²å•¥ï¼Œä¸ºå•¥è¦è¿™ä¹ˆå†™ã€‚å°±åƒç»™ä¸€ç¯‡æ–‡ç« åŠ æ³¨è§£ä¸€æ ·ï¼Œå¸®åŠ©åˆ«äººæ›´å¥½åœ°ç†è§£ä»£ç çš„æ„æ€ï¼Œç‰¹åˆ«æ˜¯é‚£äº›å¤æ‚çš„ç®—æ³•æˆ–è€…å…³é”®çš„æ­¥éª¤ï¼ŒåŠ äº†æ³¨é‡Šå°±å¥½æ‡‚å¤šäº†ã€‚

### ç»´æŠ¤æ–¹é¢

- **æ¨¡å—ä¹‹é—´å°‘ç‰µè¿**ï¼šä»£ç é‡Œå„ä¸ªæ¨¡å—ä¹‹é—´åˆ« â€œä½ ä¾èµ–æˆ‘ï¼Œæˆ‘ä¾èµ–ä½ â€ çš„ï¼Œä¾èµ–å¤ªå¤šï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼Œä¸€ä¸ªåœ°æ–¹æ”¹äº†ï¼Œå¯èƒ½å¥½å¤šåœ°æ–¹éƒ½å¾—è·Ÿç€æ”¹ï¼Œå¤ªéº»çƒ¦ã€‚å°±åƒä¸€ä¸ªå›¢é˜Ÿé‡Œï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å·¥ä½œï¼Œäº’ä¸å¹²æ‰°ï¼Œè¿™æ ·è°è¦è°ƒæ•´å·¥ä½œï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°åˆ«äººã€‚
- **æ¯ä¸ªæ¨¡å—ä¸“æ³¨ä¸€ä»¶äº‹**ï¼šæ¯ä¸ªæ¨¡å—éƒ½åº”è¯¥ä¸“å¿ƒåšå¥½è‡ªå·±çš„ä¸€ä»¶äº‹ï¼ŒåŠŸèƒ½è¦é›†ä¸­ã€‚æ¯”å¦‚ä¸€ä¸ªåšå›¾ç‰‡å¤„ç†çš„æ¨¡å—ï¼Œå°±åªè´Ÿè´£å¤„ç†å›¾ç‰‡ï¼Œåˆ«åˆæƒ³ç€å»å¤„ç†éŸ³é¢‘å•¥çš„ï¼Œè¿™æ ·è¿™ä¸ªæ¨¡å—çš„åŠŸèƒ½å°±å¾ˆæ¸…æ™°ï¼Œä»¥åè¦ä¿®æ”¹æˆ–è€…æ‰©å±•è¿™ä¸ªæ¨¡å—çš„åŠŸèƒ½ï¼Œä¹Ÿå®¹æ˜“æ“ä½œã€‚
- **å®ˆè§„çŸ©å¥½åä½œ**ï¼šå†™ä»£ç è¦éµå¾ªä¸€äº›å¤§å®¶éƒ½è®¤å¯çš„è®¾è®¡åŸåˆ™å’Œè§„èŒƒï¼Œå°±åƒå¤§å®¶éƒ½éµå®ˆäº¤é€šè§„åˆ™ä¸€æ ·ï¼Œè¿™æ ·æ•´ä¸ªå›¢é˜Ÿå†™å‡ºæ¥çš„ä»£ç é£æ ¼ç»Ÿä¸€ï¼Œå¤§å®¶ä¸€èµ·åˆä½œçš„æ—¶å€™ï¼Œå°±å¾ˆå®¹æ˜“çœ‹æ‡‚åˆ«äººå†™çš„ä»£ç ï¼Œä¹Ÿæ–¹ä¾¿ä¸€èµ·ç»´æŠ¤å’Œå¼€å‘ã€‚

### æ€§èƒ½æ–¹é¢

- **é€Ÿåº¦å¿«ä¸ç£¨è¹­**ï¼šå¥½ä»£ç è¿è¡Œèµ·æ¥é€Ÿåº¦è¦å¿«ï¼Œä¸ç®¡æ˜¯å¤„ç†å°‘é‡æ•°æ®è¿˜æ˜¯å¤§é‡æ•°æ®ï¼Œéƒ½èƒ½åœ¨çŸ­æ—¶é—´å†…ç»™å‡ºç»“æœï¼Œä¸ä¼šè®©ç”¨æˆ·ç­‰å¾—ä¸è€çƒ¦ã€‚æ¯”å¦‚ä¸€ä¸ªæœç´¢å¼•æ“ï¼Œç”¨æˆ·è¾“å…¥å…³é”®è¯åï¼Œå¾—é©¬ä¸ŠæŠŠç›¸å…³çš„æœç´¢ç»“æœæ˜¾ç¤ºå‡ºæ¥ï¼Œè¦æ˜¯åŠå¤©æ²¡ååº”ï¼Œç”¨æˆ·è‚¯å®šå°±ä¸æƒ³ç”¨äº†ã€‚
- **èƒ½è·Ÿç€ä¸šåŠ¡ä¸€èµ·é•¿å¤§**ï¼šéšç€ä¸šåŠ¡çš„å‘å±•ï¼Œç”¨æˆ·è¶Šæ¥è¶Šå¤šï¼Œæ•°æ®é‡è¶Šæ¥è¶Šå¤§ï¼Œå¥½ä»£ç å¾—èƒ½é€‚åº”è¿™ç§å˜åŒ–ï¼Œå¾ˆå®¹æ˜“å°±èƒ½æ‰©å±•åŠŸèƒ½ã€æå‡æ€§èƒ½ã€‚å°±åƒä¸€ä¸ªå°åº—é“ºï¼Œç”Ÿæ„è¶Šæ¥è¶Šå¥½ï¼Œåº—é¢å¾—èƒ½æ–¹ä¾¿åœ°æ‰©å¤§ï¼Œå¢åŠ æ–°çš„å•†å“å’ŒæœåŠ¡ä¸€æ ·ã€‚

### å®‰å…¨æ–¹é¢

- **æ•°æ®ä¿æŠ¤å¾—å¥½**ï¼šä»£ç è¦ä¿è¯æ•°æ®çš„å®‰å…¨ï¼Œä¸èƒ½è®©ç”¨æˆ·çš„ä¿¡æ¯æ³„éœ²å‡ºå»ï¼Œä¹Ÿä¸èƒ½è¢«åˆ«äººéšä¾¿ç¯¡æ”¹ã€‚æ¯”å¦‚ç”¨æˆ·çš„è´¦å·å¯†ç ã€é“¶è¡Œå¡ä¿¡æ¯ç­‰ï¼Œéƒ½å¾—åŠ å¯†ä¿å­˜ï¼Œé˜²æ­¢é»‘å®¢æ”»å‡»ã€‚
- **æƒé™ç®¡ç†ä¸ä¹±å¥—**ï¼šå¯¹äºä¸åŒçš„ç”¨æˆ·ï¼Œè¦æœ‰ä¸åŒçš„æƒé™ç®¡ç†ã€‚å°±åƒä¸€ä¸ªå…¬å¸ï¼Œè€æ¿ã€ç»ç†ã€æ™®é€šå‘˜å·¥ï¼Œä»–ä»¬èƒ½è®¿é—®å’Œæ“ä½œçš„ç³»ç»ŸåŠŸèƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œä»£ç å¾—èƒ½å‡†ç¡®åœ°æ§åˆ¶è¿™äº›æƒé™ï¼Œä¿è¯åªæœ‰æœ‰ç›¸åº”æƒé™çš„äººæ‰èƒ½åšç›¸åº”çš„äº‹ ã€‚

## å·¥å‚æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

### ä¸¤è€…çš„æ¦‚å¿µåŒºåˆ†

å·¥å‚æ¨¡å¼**å…³æ³¨çš„æ˜¯åˆ›å»ºå•ä¸€ç±»å‹å¯¹è±¡**ï¼Œå®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œç”±å­ç±»å®ç°å…·ä½“å¯¹è±¡çš„å®ä¾‹åŒ–ã€‚

æŠ½è±¡å·¥å‚æ¨¡å¼**å…³æ³¨çš„æ˜¯åˆ›å»ºä¸€æ—ç›¸å…³å¯¹è±¡**ï¼Œæä¾›ä¸€ä¸ªæ¥å£æ¥åˆ›å»ºä¸€ç»„ç›¸å…³çš„æˆ–äº’ç›¸ä¾èµ–çš„å¯¹è±¡ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬çš„å…·ä½“ç±»ã€‚

å·¥å‚æ–¹æ³•ä¸­ï¼Œå¾€å¾€åªéœ€è¦åˆ›å»º**ä¸€ç§ç±»å‹çš„äº§å“**ï¼Œä½†æ˜¯å¦‚æœéœ€æ±‚æ”¹å˜ï¼Œéœ€è¦å¢åŠ å¤š**ç§ç±»å‹çš„äº§å“ï¼Œå³å¢åŠ äº§å“æ—**,å°±éœ€è¦ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚

### ä¸¤è€…å„è‡ªçš„å®ç°

ä»¥ä¸‹æ˜¯ä½¿ç”¨ Java ä»£ç åˆ†åˆ«é€šè¿‡å·¥å‚æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼å®ç°æ±½è½¦å·¥å‚çš„ç¤ºä¾‹ï¼š

#### å·¥å‚æ¨¡å¼

1. **å®šä¹‰æ±½è½¦æ¥å£**

```
// æ±½è½¦æ¥å£
interface Car {
    void drive();
}
```

1. **å®ç°å…·ä½“çš„æ±½è½¦ç±»**

```
// å…·ä½“çš„æ±½è½¦ç±»ï¼šå®é©¬
class BMW implements Car {
    @Override
    public void drive() {
        System.out.println("é©¾é©¶å®é©¬æ±½è½¦");
    }
}

// å…·ä½“çš„æ±½è½¦ç±»ï¼šå¥”é©°
class Mercedes implements Car {
    @Override
    public void drive() {
        System.out.println("é©¾é©¶å¥”é©°æ±½è½¦");
    }
}
```

1. **åˆ›å»ºæ±½è½¦å·¥å‚ç±»**

```
// æ±½è½¦å·¥å‚ç±»
class CarFactory {
    public Car createCar(String carType) {
        if ("BMW".equalsIgnoreCase(carType)) {
            return new BMW();
        } else if ("Mercedes".equalsIgnoreCase(carType)) {
            return new Mercedes();
        }
        return null;
    }
}
```

1. **ä½¿ç”¨æ±½è½¦å·¥å‚åˆ›å»ºæ±½è½¦**

```
// æµ‹è¯•ä»£ç 
public class FactoryPatternCarExample {
    public static void main(String[] args) {
        CarFactory factory = new CarFactory();
        Car bmw = factory.createCar("BMW");
        Car mercedes = factory.createCar("Mercedes");

        if (bmw!= null) {
            bmw.drive();
        }
        if (mercedes!= null) {
            mercedes.drive();
        }
    }
}
```

#### æŠ½è±¡å·¥å‚æ¨¡å¼

1. **å®šä¹‰æ±½è½¦æ¥å£å’Œä¸åŒç±»å‹çš„æ±½è½¦æ¥å£**

```
// æ±½è½¦æ¥å£
interface Car {
    void drive();
}

// SUV æ±½è½¦æ¥å£
interface SUVCar extends Car {
}

// è½¿è½¦æ¥å£
interface SedanCar extends Car {
}
```

1. **å®ç°å…·ä½“çš„æ±½è½¦ç±»**

```
// å…·ä½“çš„ SUV æ±½è½¦ç±»ï¼šå®é©¬ X5
class BMWX5 implements SUVCar {
    @Override
    public void drive() {
        System.out.println("é©¾é©¶å®é©¬ X5 SUV");
    }
}

// å…·ä½“çš„è½¿è½¦ç±»ï¼šå®é©¬ 5 ç³»
class BMW5Series implements SedanCar {
    @Override
    public void drive() {
        System.out.println("é©¾é©¶å®é©¬ 5 ç³»è½¿è½¦");
    }
}

// å…·ä½“çš„ SUV æ±½è½¦ç±»ï¼šå¥”é©° GLC
class MercedesGLC implements SUVCar {
    @Override
    public void drive() {
        System.out.println("é©¾é©¶å¥”é©° GLC SUV");
    }
}

// å…·ä½“çš„è½¿è½¦ç±»ï¼šå¥”é©° E çº§
class MercedesEClass implements SedanCar {
    @Override
    public void drive() {
        System.out.println("é©¾é©¶å¥”é©° E çº§è½¿è½¦");
    }
}
```

1. **å®šä¹‰æŠ½è±¡æ±½è½¦å·¥å‚æ¥å£**

```
// æŠ½è±¡æ±½è½¦å·¥å‚æ¥å£
interface CarAbstractFactory {
    SUVCar createSUVCar();
    SedanCar createSedanCar();
}
```

1. **å®ç°å…·ä½“çš„æ±½è½¦å·¥å‚ç±»**

```
// å®é©¬æ±½è½¦å·¥å‚
class BMWCarFactory implements CarAbstractFactory {
    @Override
    public SUVCar createSUVCar() {
        return new BMWX5();
    }

    @Override
    public SedanCar createSedanCar() {
        return new BMW5Series();
    }
}

// å¥”é©°æ±½è½¦å·¥å‚
class MercedesCarFactory implements CarAbstractFactory {
    @Override
    public SUVCar createSUVCar() {
        return new MercedesGLC();
    }

    @Override
    public SedanCar createSedanCar() {
        return new MercedesEClass();
    }
}
```

1. **ä½¿ç”¨æŠ½è±¡æ±½è½¦å·¥å‚åˆ›å»ºæ±½è½¦**

```
// æµ‹è¯•ä»£ç 
public class AbstractFactoryPatternCarExample {
    public static void main(String[] args) {
        CarAbstractFactory bmwFactory = new BMWCarFactory();
        SUVCar bmwX5 = bmwFactory.createSUVCar();
        SedanCar bmw5Series = bmwFactory.createSedanCar();

        CarAbstractFactory mercedesFactory = new MercedesCarFactory();
        SUVCar mercedesGLC = mercedesFactory.createSUVCar();
        SedanCar mercedesEClass = mercedesFactory.createSedanCar();

        if (bmwX5!= null) {
            bmwX5.drive();
        }
        if (bmw5Series!= null) {
            bmw5Series.drive();
        }
        if (mercedesGLC!= null) {
            mercedesGLC.drive();
        }
        if (mercedesEClass!= null) {
            mercedesEClass.drive();
        }
    }
}
```

### åŒºåˆ«æ€»ç»“

- **å·¥å‚æ¨¡å¼**ï¼šä¸»è¦ç”¨äºåˆ›å»ºå•ä¸€ç±»å‹çš„æ±½è½¦ï¼Œé€šè¿‡ä¸€ä¸ªå·¥å‚ç±»æ ¹æ®ä¼ å…¥çš„å‚æ•°å†³å®šåˆ›å»ºå“ªç§å…·ä½“çš„æ±½è½¦ã€‚å¦‚æœéœ€è¦æ·»åŠ æ–°çš„æ±½è½¦ç±»å‹ï¼Œéœ€è¦ä¿®æ”¹å·¥å‚ç±»çš„`createCar`æ–¹æ³•ï¼Œä¸ç¬¦åˆå¼€é—­åŸåˆ™ã€‚
- **æŠ½è±¡å·¥å‚æ¨¡å¼**ï¼šç”¨äºåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³çš„æ±½è½¦äº§å“ï¼ˆå¦‚ SUV å’Œè½¿è½¦ï¼‰ã€‚æ¯ä¸ªå…·ä½“çš„å·¥å‚ç±»è´Ÿè´£åˆ›å»ºç‰¹å®šå“ç‰Œçš„ä¸€ç³»åˆ—æ±½è½¦ã€‚å½“éœ€è¦æ·»åŠ æ–°çš„å“ç‰Œæ±½è½¦ç³»åˆ—æ—¶ï¼Œåªéœ€è¦åˆ›å»ºæ–°çš„å…·ä½“å·¥å‚ç±»ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹ç°æœ‰çš„ä»£ç ï¼Œæ›´ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œå…·æœ‰æ›´å¥½çš„æ‰©å±•æ€§å’Œçµæ´»æ€§ã€‚
